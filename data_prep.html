<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Preparation</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="navbar">
        <a href="introduction.html">Introduction</a>
        <a href="data_prep.html" class="active">Data Prep</a>
        <a href="eda.html">EDA</a>        
        <a href="pca.html">PCA</a>
        <a href="clustering.html">Clustering</a>
        <a href="arm.html">ARM</a>
        <a href="decision_trees.html">Decision Trees</a>
        <a href="naive_bayes.html">Naive Bayes</a>
        <a href="svm.html">SVM</a>
        <a href="regression.html">Regression</a>
        <a href="conclusions.html">Conclusions</a>
        <a href="about_me.html">About Me</a>
    </div>

    <div class="content-section">
        <h1>Data Preparation</h1>

        <div class="content-wrapper">
            <p>
                The data used in this project was sourced from the USDA FoodData Central API, a reliable and comprehensive repository of food and nutrient data. The decision to use USDA's database stems from its authoritative and up-to-date information on food composition, making it an ideal choice for a health analytics project. By gathering data directly from the USDA, we ensure a high level of accuracy and relevance for analyzing the impact of ultra-processed foods on public health. Health analytics is essential for uncovering critical trends and making informed decisions about dietary habits, addressing global health crises such as obesity and chronic diseases.
            </p>
        </div>

        <h2>How the Data Was Gathered</h2>

        <div class="content-wrapper">
            <p>
                Data was collected using the USDA FoodData Central API, a trusted and comprehensive source of food and nutrition information. 
                The USDA (United States Department of Agriculture) maintains an extensive repository of food composition data, making it a
                reliable resource for health and nutrition analytics. The **USDA FoodData Central API** provides access to various datasets, 
                including nutrient profiles, food descriptions, and product categories.
            </p>

            <!-- USDA Image -->
            <div class="image-container">
                <img src="assets/usda.webp" alt="USDA Data Source" class="topic-image">
            </div>

            <div class="button-section">
                <a href="https://www.usda.gov/" target="_blank" class="github-button">USDA Data Website</a>
            </div>

            <p>
                For programmatic access, we used the **FoodData Central API**, which allows querying foods based on categories, brand names, and 
                specific nutrient values. The core endpoint utilized for retrieving food data was:
            </p>

            <div class="button-section">
                <a href="https://api.nal.usda.gov/fdc/v1/foods/search" target="_blank" class="github-button">Core Endpoint</a>
            </div>
        </div>

        <h2>Raw and Cleaned Data</h2>

        <div class="content-wrapper">
            <p>Below are snapshots of the raw and cleaned data, providing an overview of the transformation process:</p>

            <div class="content-wrapper">
                <h3>Raw Data</h3>
                <div class="image-container">
                    <img src="assets/raw_data.jpeg" alt="Raw Data Snapshot" class="topic-image">
                </div>

                <!-- Button for Fetching Raw Data Script -->
                <div class="button-section">
                    <a href="https://github.com/mrxxnal/USDA_FOODS/blob/main/src/fetch_data.py" target="_blank" class="github-button">
                        Fetch Raw Data Script
                    </a>
                </div>

                <!-- Button for Raw Data CSV -->
                <div class="button-section">
                    <a href="https://github.com/mrxxnal/USDA_FOODS/blob/main/data/raw_data.csv" target="_blank" class="github-button">
                        Raw Data Code
                    </a>
                </div>
            </div>

            <div class="content-wrapper">
                <h3>Cleaned Data</h3>
                <div class="image-container">
                    <img src="assets/cleaned_data.jpeg" alt="Cleaned Data Snapshot" class="topic-image">
                </div>    

                <h3>Data Cleaning and Transformation Process</h3>
                <p>
                    After fetching the raw data, multiple preprocessing steps were carried out to clean and transform it for analysis:
                </p>
                <ul>
                    <li><strong>Handling Missing Values:</strong> Missing values were replaced with default values to ensure completeness. Nutritional attributes were set to zero if missing, while categorical columns like 'Brand' and 'Category' were labeled as 'Unknown' or 'Uncategorized'.</li>
                    <li><strong>Removing Duplicates:</strong> Duplicate rows were detected and removed to prevent redundancy in the dataset.</li>
                    <li><strong>Outlier Removal:</strong> Statistical techniques (Interquartile Range - IQR) were applied to detect and remove extreme outliers in key numerical features such as 'Calories', 'Protein', 'Fat', and 'Carbs'.</li>
                    <li><strong>Feature Engineering:</strong> New meaningful features were created, such as:
                        <ul>
                            <li>**Calories per Protein, Calories per Fat, and Calories per Carb** to analyze nutritional density.</li>
                            <li>**Calories Binning (Low, Medium, High, Very High)** to categorize food items into calorie levels.</li>
                        </ul>
                    </li>
                    <li><strong>Data Normalization:</strong> StandardScaler was used to normalize the numerical features ('Calories', 'Protein', 'Fat', and 'Carbs') for better model performance.</li>
                    <li><strong>Final Data Storage:</strong> The cleaned dataset was saved in CSV format for further analysis and visualization.</li>
                </ul>

                <!-- Button for Cleaning Data Script -->
                <div class="button-section">
                    <a href="https://github.com/mrxxnal/USDA_FOODS/blob/main/USDA_FOOD_Website/src/clean_data.py" target="_blank" class="github-button">
                        Clean Data Script
                    </a>
                </div>

                <!-- Button for Cleaned Data CSV -->
                <div class="button-section">
                    <a href="https://github.com/mrxxnal/USDA_FOODS/blob/main/data/cleaned_data.csv" target="_blank" class="github-button">
                        Cleaned Data Code
                    </a>
                </div>            
            </div>
        </div>
    </div>
</body>
</html>